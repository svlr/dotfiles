# ─── Переменные
set $mod Mod4
set $term kitty
set $menu rofi -show drun

# ─── Внешний вид
# Шрифт
font pango:FiraCode Nerd Font 11
# Бордеры
default_border pixel 0
default_floating_border pixel 0
# Цвета окон
client.focused          #43434d #43434d #eeeeee #43434d #43434d
client.focused_inactive #2a2a2e #2a2a2e #bbbbbb #2a2a2e #2a2a2e
client.unfocused        #1e1e22 #1e1e22 #888888 #1e1e22 #1e1e22
client.urgent           #c43c3c #c43c3c #ffffff #c43c3c #c43c3c
client.placeholder      #1e1e22 #1e1e22 #eeeeee #1e1e22 #1e1e22
# Минимальные отступы
gaps inner 5
gaps outer 0
smart_gaps off

# ─── Обои и настройки монитора
exec_always --no-startup-id autorandr --change
exec_always feh --bg-fill ~/MyFiles/wallpapers/wallpaper34.jpeg
set $fm HDMI-2
set $sm HDMI-1

# ─── Язык, повтор, сенса
#exec --no-startup-id setxkbmap -layout "us,ru" -option "grp:caps_toggle"
#exec --no-startup-id xset r rate 500 50
# Настройка мыши: flat сенса + скорость 0.5 для всех мышек
#exec --no-startup-id ~/MyFiles/usefull_scripts/mouse-sense.sh

# --- Бар
exec_always ~/.config/polybar/launch.sh

# ─── Автозапуск
exec_always dbus-update-activation-environment --systemd DISPLAY XAUTHORITY XDG_CURRENT_DESKTOP=i3
exec_always /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec_always --no-startup-id autotiling
exec_always --no-startup-id clipmenud &
#exec_always --no-startup-id ~/.config/polybar/launch.sh &
exec_always --no-startup-id picom --config ~/.config/picom/picom.conf
exec_always --no-startup-id dunst
exec_always --no-startup-id nekoray
exec_always --no-startup-id Telegram
exec_always --no-startup-id ~/MyFiles/usefull_scripts/fixsteam.py
exec_always --no-startup-id ~/MyFiles/usefull_scripts/xborder/xborders --c ~/MyFiles/usefull_scripts/xborder/example_config.json

# ─── Энергосбережение + блокировка
exec_always --no-startup-id xidlehook \
  --not-when-fullscreen \
  --not-when-audio \
  --timer 1400 "~/MyFiles/usefull_scripts/lockscreen.sh" "" \
  --timer 1500 "systemctl suspend" ""

# Отключить автоматическое выключение экрана
exec --no-startup-id xset s off
exec --no-startup-id xset -dpms

# ─── Бинды приложений
bindsym $mod+Return exec $term
bindsym $mod+d exec $menu
bindsym $mod+f exec firefox
bindsym $mod+e exec thunar
bindsym $mod+q kill
bindsym $mod+Shift+r reload
bindsym Mod1+q exec --no-startup-id sh -c '~/MyFiles/usefull_scripts/lockscreen.sh && systemctl suspend'
bindsym Mod1+Shift+q exec ~/MyFiles/usefull_scripts/lockscreen.sh
bindsym Mod1+w exec bash -c 'shutdown now'
bindsym Mod1+e exec bash -c 'reboot'
bindsym $mod+v exec --no-startup-id clipmenu
bindsym $mod+Shift+c exec --no-startup-id pkexec ~/MyFiles/usefull_scripts/clear-dust-in-system
bindsym Mod1+Right exec --no-startup-id ~/MyFiles/usefull_scripts/wallpapers.py
bindsym F8 exec --no-startup-id ~/MyFiles/usefull_scripts/updatedisplay.sh

# ─── Скрины и запись экрана
bindsym Home exec maim -s | xclip -selection clipboard -t image/png
bindsym Shift+Home exec maim -s ~/Pictures/Screenshots/$(date +%F_%T).png
bindsym Mod1+Home exec maim | xclip -selection clipboard -t image/png
bindsym Mod1+Shift+Home exec maim ~/Pictures/Screenshots/$(date +%F_%T).png

# ─── Громкость
bindsym XF86AudioRaiseVolume exec pamixer -i 5
bindsym XF86AudioLowerVolume exec pamixer -d 5
bindsym XF86AudioMute exec pamixer -t

# ─── Перемещение между окнами
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym Mod1+h move left
bindsym Mod1+j move down
bindsym Mod1+k move up
bindsym Mod1+l move right

# --- Управление поведением окон
floating_modifier $mod
mode "resize" {
    bindsym h resize shrink width 10 px or 10 ppt
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt
    # Выход из режима
    bindsym Escape mode "default"
    bindsym Return mode "default"
}
# Вход в режим ресайза
bindsym $mod+r mode "resize"
# Тоггл режима floating
bindsym F2 floating toggle
# Тоггл fullscreen
bindsym F3 fullscreen toggle
# scratchpad
bindsym F4 move to scratchpad
#bindsym $mod+a scratchpad show
bindsym Mod1+a exec --no-startup-id ~/MyFiles/usefull_scripts/scratchpad-rofi.py
# ─── Рабочие пространства
workspace 1 output $fm
workspace 2 output $fm
workspace 3 output $fm
workspace 4 output $fm
workspace 5 output $fm
workspace 6 output $fm
workspace 7 output $fm
workspace 8 output $fm
workspace 9 output $fm
workspace 10 output $fm
workspace 11 output $sm
workspace 12 output $sm
workspace 13 output $sm
workspace 14 output $sm
workspace 15 output $sm
workspace 16 output $sm
workspace 17 output $sm
workspace 18 output $sm
workspace 19 output $sm
workspace 20 output $sm

bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
bindsym Mod1+1 workspace 11
bindsym Mod1+2 workspace 12
bindsym Mod1+3 workspace 13
bindsym Mod1+4 workspace 14
bindsym Mod1+5 workspace 15
bindsym Mod1+6 workspace 16
bindsym Mod1+7 workspace 17
bindsym Mod1+8 workspace 18
bindsym Mod1+9 workspace 19
bindsym Mod1+0 workspace 20

bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10
bindsym Mod1+Shift+1 move container to workspace 11
bindsym Mod1+Shift+2 move container to workspace 12
bindsym Mod1+Shift+3 move container to workspace 13
bindsym Mod1+Shift+4 move container to workspace 14
bindsym Mod1+Shift+5 move container to workspace 15
bindsym Mod1+Shift+6 move container to workspace 16
bindsym Mod1+Shift+7 move container to workspace 17
bindsym Mod1+Shift+8 move container to workspace 18
bindsym Mod1+Shift+9 move container to workspace 19
bindsym Mod1+Shift+0 move container to workspace 20

# ─── Правила окон
for_window [class="nekoray"] floating enable, move to scratchpad
for_window [class="Pavucontrol"] floating enable
for_window [class="mpv"] floating enable
for_window [class="imv"] floating enable
for_window [class="File-roller"] floating enable
for_window [class="Telegram"] floating enable
#, move to scratchpad
# Диалоги, выбор файлов, side-меню
for_window [window_role="pop-up"] floating enable
for_window [window_type="dialog"] floating enable
for_window [window_type="utility"] floating enable
for_window [title="File Operation Progress"] floating enable
for_window [title="Select Folder"] floating enable
for_window [title="Open File"] floating enable
for_window [title="Save File"] floating enable
