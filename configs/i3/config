# ─── Переменные
set $mod Mod4
set $term kitty
set $menu rofi -show drun

# ─── Внешний вид
# Шрифт
font pango:JetBrains Mono 11
# Бордеры
default_border pixel 0
default_floating_border pixel 0
# Цвета окон
client.focused          #43434d #43434d #eeeeee #43434d #43434d
client.focused_inactive #2a2a2e #2a2a2e #bbbbbb #2a2a2e #2a2a2e
client.unfocused        #1e1e22 #1e1e22 #888888 #1e1e22 #1e1e22
client.urgent           #c43c3c #c43c3c #ffffff #c43c3c #c43c3c
client.placeholder      #1e1e22 #1e1e22 #eeeeee #1e1e22 #1e1e22
# Минимальные отступы
gaps inner 5
gaps outer 0
smart_gaps off

# ─── Обои и настройки монитора
exec_always feh --bg-fill /home/svlr/MyFiles/set_of_random_files/feh_wallpaper.png
exec --no-startup-id bash -c 'sleep 2 && xrandr --output HDMI-2 --mode 1920x1080 --rate 120 --primary'

# ─── Язык, повтор, сенса
exec --no-startup-id setxkbmap -layout "us,ru" -option "grp:caps_toggle"
exec --no-startup-id xset r rate 500 50
# Настройка мыши: flat сенса + скорость 0.5 для всех мышек
exec --no-startup-id ~/MyFiles/usefull_scripts/mouse-sense.sh

# --- Бар
exec_always ~/.config/polybar/launch.sh

# ─── Автозапуск
exec_always dbus-update-activation-environment --systemd DISPLAY XAUTHORITY XDG_CURRENT_DESKTOP=i3
exec_always /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec_always --no-startup-id autotiling
exec_always --no-startup-id clipmenud &
#exec_always --no-startup-id ~/.config/polybar/launch.sh &
exec_always --no-startup-id picom --config ~/.config/picom/picom.conf
exec_always --no-startup-id dunst
exec_always --no-startup-id nekoray
exec_always --no-startup-id Telegram
exec_always --no-startup-id ~/MyFiles/usefull_scripts/fixsteam.py

# ─── Энергосбережение + блокировка
exec_always --no-startup-id xidlehook \
  --not-when-fullscreen \
  --not-when-audio \
  --timer 1800 "~/MyFiles/usefull_scripts/lockscreen.sh" "" \
  --timer 3600 "systemctl suspend" ""

# Отключить автоматическое выключение экрана
exec --no-startup-id xset s off
exec --no-startup-id xset -dpms

# ─── Бинды приложений
bindsym $mod+Return exec $term
bindsym $mod+d exec $menu
bindsym $mod+f exec firefox
bindsym $mod+e exec thunar
bindsym $mod+q kill
bindsym $mod+Shift+r reload
bindsym Mod1+q exec --no-startup-id sh -c '~/MyFiles/usefull_scripts/lockscreen.sh && systemctl suspend'
bindsym Mod1+Shift+q exec ~/MyFiles/usefull_scripts/lockscreen.sh
bindsym Mod1+w exec bash -c 'shutdown now'
bindsym Mod1+e exec bash -c 'reboot'
bindsym $mod+v exec --no-startup-id clipmenu

# ─── Скрины и запись экрана
bindsym Home exec maim -s | xclip -selection clipboard -t image/png
bindsym Shift+Home exec maim -s ~/Pictures/Screenshots/$(date +%F_%T).png

# ─── Громкость
bindsym XF86AudioRaiseVolume exec pamixer -i 5
bindsym XF86AudioLowerVolume exec pamixer -d 5
bindsym XF86AudioMute exec pamixer -t

# ─── Перемещение между окнами
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# --- Управление поведением окон
floating_modifier $mod
mode "resize" {
    bindsym h resize shrink width 10 px or 10 ppt
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt
    # Выход из режима
    bindsym Escape mode "default"
    bindsym Return mode "default"
}
# Вход в режим ресайза
bindsym $mod+r mode "resize"
# Тоггл режима floating
bindsym $mod+Shift+space floating toggle
# Тоггл fullscreen
bindsym $mod+Shift+f fullscreen toggle
# scratchpad
bindsym Mod1+s move to scratchpad
#bindsym $mod+a scratchpad show
bindsym Mod1+a exec --no-startup-id ~/MyFiles/usefull_scripts/scratchpad-rofi.py
# ─── Рабочие пространства
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# ─── Правила окон
for_window [class="nekoray"] floating enable, move to scratchpad
for_window [class="Pavucontrol"] floating enable
for_window [class="mpv"] floating enable
for_window [class="imv"] floating enable
for_window [class="File-roller"] floating enable
for_window [class="Telegram"] floating enable
#, move to scratchpad
# Диалоги, выбор файлов, side-меню
for_window [window_role="pop-up"] floating enable
for_window [window_type="dialog"] floating enable
for_window [window_type="utility"] floating enable
for_window [title="File Operation Progress"] floating enable
for_window [title="Select Folder"] floating enable
for_window [title="Open File"] floating enable
for_window [title="Save File"] floating enable
